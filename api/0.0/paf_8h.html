<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libpaf: include/paf.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libpaf<span id="projectnumber">&#160;1.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">paf.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Core Pathfinder Client Library API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;<a class="el" href="paf__props_8h_source.html">paf_props.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="paf__match_8h_source.html">paf_match.h</a>&gt;</code><br />
<code>#include &lt;paf_err.h&gt;</code><br />
</div>
<p><a href="paf_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a52fec2c02be95b483132e4637d73a590" id="r_a52fec2c02be95b483132e4637d73a590"><td class="memItemLeft" align="right" valign="top">struct paf_context *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#a52fec2c02be95b483132e4637d73a590">paf_attach</a> (const char *domain_name)</td></tr>
<tr class="separator:a52fec2c02be95b483132e4637d73a590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0882224e814007bc8d60aa951e432df6" id="r_a0882224e814007bc8d60aa951e432df6"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#a0882224e814007bc8d60aa951e432df6">paf_publish</a> (struct paf_context *context, const struct paf_props *props)</td></tr>
<tr class="separator:a0882224e814007bc8d60aa951e432df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c54a2a7b1a32c0f7633677adc8db5c" id="r_a78c54a2a7b1a32c0f7633677adc8db5c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#a78c54a2a7b1a32c0f7633677adc8db5c">paf_modify</a> (struct paf_context *context, int64_t service_id, const struct paf_props *props)</td></tr>
<tr class="separator:a78c54a2a7b1a32c0f7633677adc8db5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0218cebb94680cdf93d74b4cc819343" id="r_ae0218cebb94680cdf93d74b4cc819343"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#ae0218cebb94680cdf93d74b4cc819343">paf_unpublish</a> (struct paf_context *context, int64_t service_id)</td></tr>
<tr class="separator:ae0218cebb94680cdf93d74b4cc819343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53fc37d6f1e033c09402cbdad77c695" id="r_ad53fc37d6f1e033c09402cbdad77c695"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#ad53fc37d6f1e033c09402cbdad77c695">paf_subscribe</a> (struct paf_context *context, const char *filter, <a class="el" href="paf__match_8h.html#ad3e0d3abdf67fe1460523b51f6cd6817">paf_match_cb</a> match_cb, void *user)</td></tr>
<tr class="separator:ad53fc37d6f1e033c09402cbdad77c695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434fbebb05a1ab2c5e4ed1bceb7f977f" id="r_a434fbebb05a1ab2c5e4ed1bceb7f977f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#a434fbebb05a1ab2c5e4ed1bceb7f977f">paf_unsubscribe</a> (struct paf_context *context, int64_t subscription_id)</td></tr>
<tr class="separator:a434fbebb05a1ab2c5e4ed1bceb7f977f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d24ee6fc4307c4121a36582616167a" id="r_a35d24ee6fc4307c4121a36582616167a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#a35d24ee6fc4307c4121a36582616167a">paf_fd</a> (struct paf_context *context)</td></tr>
<tr class="separator:a35d24ee6fc4307c4121a36582616167a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7077572c17922c6c07c993646fe26976" id="r_a7077572c17922c6c07c993646fe26976"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process</a> (struct paf_context *context)</td></tr>
<tr class="separator:a7077572c17922c6c07c993646fe26976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac92ff44b38f953d7be27e195fa7b9b3" id="r_aac92ff44b38f953d7be27e195fa7b9b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#aac92ff44b38f953d7be27e195fa7b9b3">paf_detach</a> (struct paf_context *context)</td></tr>
<tr class="separator:aac92ff44b38f953d7be27e195fa7b9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41d8efd6e153e980cc5222ccb1a8617" id="r_ac41d8efd6e153e980cc5222ccb1a8617"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#ac41d8efd6e153e980cc5222ccb1a8617">paf_close</a> (struct paf_context *context)</td></tr>
<tr class="separator:ac41d8efd6e153e980cc5222ccb1a8617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde67479418f442ee49307378efbd5c4" id="r_acde67479418f442ee49307378efbd5c4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="paf_8h.html#acde67479418f442ee49307378efbd5c4">paf_filter_escape</a> (const char *s)</td></tr>
<tr class="separator:acde67479418f442ee49307378efbd5c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Core Pathfinder Client Library API. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a52fec2c02be95b483132e4637d73a590" name="a52fec2c02be95b483132e4637d73a590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52fec2c02be95b483132e4637d73a590">&#9670;&#160;</a></span>paf_attach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct paf_context * paf_attach </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>domain_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attach to a domain.</p>
<p>This function attaches to a Pathfinder domain. The return value is a context, which is used to store library-internal service and subscription state as handed to it by the application, and subscription matches from a remote server, as well as protocol-related state for server communication.</p>
<p><a class="el" href="paf_8h.html#a52fec2c02be95b483132e4637d73a590">paf_attach()</a> will succeed even though the domain doesn't currently exists on the local system. Any remote communication failure, to the extent any such happens during <a class="el" href="paf_8h.html#a52fec2c02be95b483132e4637d73a590">paf_attach()</a>, also doesn't make the call fail.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">domain_name</td><td>The name of the Pathfinder domain.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a context reference on success, or NULL if the system didn't have adequate resources to fulfill the request. </dd></dl>

</div>
</div>
<a id="a0882224e814007bc8d60aa951e432df6" name="a0882224e814007bc8d60aa951e432df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0882224e814007bc8d60aa951e432df6">&#9670;&#160;</a></span>paf_publish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t paf_publish </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct paf_props *&#160;</td>
          <td class="paramname"><em>props</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Publish a service.</p>
<p>This function allows the application to inform the library of a service it wishes to have published at any time the context has an connection to a server, serving that domain.</p>
<p>The successful return of <a class="el" href="paf_8h.html#a0882224e814007bc8d60aa951e432df6">paf_publish()</a> indicates that the service as been accepted into the library's context. It does not mean that the service has yet been successfully published in a server, or even that there is a connection to a server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>A reference to the domain where the service should be published. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">props</td><td>The properties of this service. Must be non-NULL, but may be an empty set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a unique id for this service on success, or &lt; 0 or failure.</dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Return Code   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PAF_ERR_PROPS_TOO_LARGE   </td><td class="markdownTableBodyNone">The service properties' maximum size was exceeded.   </td></tr>
</table>

</div>
</div>
<a id="a78c54a2a7b1a32c0f7633677adc8db5c" name="a78c54a2a7b1a32c0f7633677adc8db5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c54a2a7b1a32c0f7633677adc8db5c">&#9670;&#160;</a></span>paf_modify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int paf_modify </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct paf_props *&#160;</td>
          <td class="paramname"><em>props</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Modify a service's properties.</p>
<p>This function modifies an already-published service's properties.</p>
<p>The successful return of this function means the changes has been commited in the supplied context, but does not mean they have propagated further (i.e to the server or to any other client, including subscriptions issued via this context).</p>
<p>The properties supplied in <code>props</code> will replace those currently in use by the service. Thus, all previous properties will be removed, and replaced in their entirety by those in <code>props</code>.</p>
<p>Only services published using the supplied <code>context</code> may be modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>A reference to the service's domain. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_id</td><td>The id of the service as returned by <a class="el" href="paf_8h.html#a0882224e814007bc8d60aa951e432df6">paf_publish()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">props</td><td>The properties that should replace the service current properties.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, or &lt; 0 or failure.</dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Return Code   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PAF_ERR_PROPS_TOO_LARGE   </td><td class="markdownTableBodyNone">The service properties maxiumum size was been exceeded.   </td></tr>
</table>

</div>
</div>
<a id="ae0218cebb94680cdf93d74b4cc819343" name="ae0218cebb94680cdf93d74b4cc819343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0218cebb94680cdf93d74b4cc819343">&#9670;&#160;</a></span>paf_unpublish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void paf_unpublish </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>service_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unpublish a service.</p>
<p>This function allows the application to inform the library of a Pathfinder service it wishes to have a previously published service removed.</p>
<p>In case the service is currently published in a server, it may not yet have been removed at the time of <a class="el" href="paf_8h.html#ae0218cebb94680cdf93d74b4cc819343">paf_unpublish()</a> call completion. There might not event be a connection to the server (where the service may still be lingering in an orphan state).</p>
<p>Only services published using the supplied <code>context</code> may be unpublished.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>A reference to the context in where the service was published. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">service_id</td><td>The id of the service as returned by <a class="el" href="paf_8h.html#a0882224e814007bc8d60aa951e432df6">paf_publish()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad53fc37d6f1e033c09402cbdad77c695" name="ad53fc37d6f1e033c09402cbdad77c695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad53fc37d6f1e033c09402cbdad77c695">&#9670;&#160;</a></span>paf_subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t paf_subscribe </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="paf__match_8h.html#ad3e0d3abdf67fe1460523b51f6cd6817">paf_match_cb</a>&#160;</td>
          <td class="paramname"><em>match_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Issue a service subscription.</p>
<p>This function registers a service subscription in the supplied context.</p>
<p>The filter can be used to specify what services are interesting to the application.</p>
<p>The filter syntax is similar to that of LDAP (see RFC 2254), but with some differences, mainly in the area of the escaping mechanism (allowing special characters in search filter name or values).</p>
<p>A search filter example: <code> (&amp;(name=my-service)(area=51)) </code></p>
<p>Supplying NULL in <code>filter</code> will results in a "match all" filter.</p>
<p>In case of a matching service appearing, is being modified, or disappeared, the <code>match_cb</code> function will be called. The callback function will only be called at the time of <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a>. See <a class="el" href="paf__match_8h.html#ad3e0d3abdf67fe1460523b51f6cd6817">paf_match_cb</a> and <a class="el" href="paf__match_8h.html#a10a0716c053f96372ef811267909daac">paf_match_type</a> for more information.</p>
<p>The successful return of <a class="el" href="paf_8h.html#ad53fc37d6f1e033c09402cbdad77c695">paf_subscribe()</a> does not guarantee that the subscription has been forwarded to a server.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>A reference to the domain in which the subscription should be issued. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filter</td><td>A search filter in string format, or NULL. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">match_cb</td><td>The callback used to notify the application of a matching service. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user</td><td>A user-supplied opaque pointer which will be supplied back to the application at every match callback call.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a unique id for this subscription on success, or &lt; 0 or failure.</dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Return Code   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PAF_ERR_FILTER_TOO_LARGE   </td><td class="markdownTableBodyNone">The filter exceeds the maximum size.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PAF_ERR_INVALID_FILTER_SYNTAX   </td><td class="markdownTableBodyNone">Invalid filter syntax.   </td></tr>
</table>

</div>
</div>
<a id="a434fbebb05a1ab2c5e4ed1bceb7f977f" name="a434fbebb05a1ab2c5e4ed1bceb7f977f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434fbebb05a1ab2c5e4ed1bceb7f977f">&#9670;&#160;</a></span>paf_unsubscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void paf_unsubscribe </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>subscription_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unsubscribe to a service.</p>
<p>This function cancels a subscription previously issued in the supplied <code>context</code>.</p>
<p>After <a class="el" href="paf_8h.html#a434fbebb05a1ab2c5e4ed1bceb7f977f">paf_unsubscribe()</a> call completition, the corresponding callback will no longer be called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>A reference to the context in where the subscription was issued. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">subscription_id</td><td>The id of the subscription as returned by <a class="el" href="paf_8h.html#ad53fc37d6f1e033c09402cbdad77c695">paf_subscribe()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a35d24ee6fc4307c4121a36582616167a" name="a35d24ee6fc4307c4121a36582616167a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d24ee6fc4307c4121a36582616167a">&#9670;&#160;</a></span>paf_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int paf_fd </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Query a context for it's file descriptor.</p>
<p>The file descriptor returned by this function allows the context to signal when a call <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> is likely to allow it to make progress. Progress here means things like receiving and processing Pathfinder wire protocol messages, handling timeout, and calling user callbacks.</p>
<p>The application should wait for the fd to become readable (i.e. it should be put into the readfds set for select(), or be marked POLLIN/EPOLLIN in case poll()/epoll() is used), and then call <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a>.</p>
<p>The file descriptor is stable (i.e the number doesn't change) across the life-time of the context. To what underlying file description it's pointing also doesn't change (a detail relevent for its use in epoll()). The fd is also unique to this context (i.e. several context will not reuse the same fd).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The context.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the context's file descriptor </dd></dl>

</div>
</div>
<a id="a7077572c17922c6c07c993646fe26976" name="a7077572c17922c6c07c993646fe26976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7077572c17922c6c07c993646fe26976">&#9670;&#160;</a></span>paf_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int paf_process </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Perform processing related to a particular context.</p>
<p>This function will processing related to the supplied context. Such processing can be things like establishing a connection to a server, sending messages to or receiving messages from a server or check for timeout on stale (orphan) services.</p>
<p>As a part of <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> call, the library may invoke one or more <a class="el" href="paf__match_8h.html#ad3e0d3abdf67fe1460523b51f6cd6817">paf_match_cb</a> subscription callbacks. Such a callback may not call back into any <a class="el" href="paf_8h.html" title="Core Pathfinder Client Library API.">paf.h</a> core API functions with the current context as it's input (e.g. <a class="el" href="paf_8h.html#ad53fc37d6f1e033c09402cbdad77c695">paf_subscribe()</a>, <a class="el" href="paf_8h.html#a434fbebb05a1ab2c5e4ed1bceb7f977f">paf_unsubscribe()</a> etc).</p>
<p><a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> may be called at any point, but will typically be called after select() (or equivalent I/O multiplexing function) has returned, and fds related to a particular context are the cause of the select() call being unblocked.</p>
<p>A context may not be left unattended (i.e. no calls to <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a>) by the application for a long duration of time, unless the context's fds aren't becoming active. In other words, the context's fd should always be in the set of fds supplied by the application to select(), until up to the point it is closed with <a class="el" href="paf_8h.html#ac41d8efd6e153e980cc5222ccb1a8617">paf_close()</a>.</p>
<p><a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> will never fail, and the return value is only used to inform the application that the context detachment it ordered (via <a class="el" href="paf_8h.html#aac92ff44b38f953d7be27e195fa7b9b3">paf_detach()</a>) has completed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The context.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 or PAF_ERR_DETACHED, in case the context has finished the detach process. </dd></dl>

</div>
</div>
<a id="aac92ff44b38f953d7be27e195fa7b9b3" name="aac92ff44b38f953d7be27e195fa7b9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac92ff44b38f953d7be27e195fa7b9b3">&#9670;&#160;</a></span>paf_detach()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void paf_detach </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Detach the context.</p>
<p>This function will initiate the process of detaching the context from any server, attempting to unpublish all services, remove all subscriptions, and finish any outstanding protocol transactions (e.g. unpublish operations that might not yet have finished).</p>
<p>To allow the detaching to happen, the application should continue to use select() for wait for the context's fd to become readable, and <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> to allow it to make progress.</p>
<p><a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> will return PAF_ERR_DETACHED when the process has completed (or timed out).</p>
<p>Since unpublication is a best-effort exercise, in case the server does not respond within a resonable time, detaching will finish.</p>
<p>After <a class="el" href="paf_8h.html#aac92ff44b38f953d7be27e195fa7b9b3">paf_detach()</a> has been called, only <a class="el" href="paf_8h.html#a35d24ee6fc4307c4121a36582616167a">paf_fd()</a>, <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> and <a class="el" href="paf_8h.html#ac41d8efd6e153e980cc5222ccb1a8617">paf_close()</a> may be called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac41d8efd6e153e980cc5222ccb1a8617" name="ac41d8efd6e153e980cc5222ccb1a8617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac41d8efd6e153e980cc5222ccb1a8617">&#9670;&#160;</a></span>paf_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void paf_close </td>
          <td>(</td>
          <td class="paramtype">struct paf_context *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the context.</p>
<p>This function will free all resources associated with context.</p>
<p>It is legal to call this function, even if the context is still attached (i.e. <a class="el" href="paf_8h.html#aac92ff44b38f953d7be27e195fa7b9b3">paf_detach()</a> was not called, or <a class="el" href="paf_8h.html#a7077572c17922c6c07c993646fe26976">paf_process()</a> has not yet returned PAF_ERR_DETACHED. If it was not detached the services will not be unpublished. Upon client disconnect, such services will be considered orphans, and will be available until their time-to-live (TTL) has expired.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">context</td><td>The context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="acde67479418f442ee49307378efbd5c4" name="acde67479418f442ee49307378efbd5c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde67479418f442ee49307378efbd5c4">&#9670;&#160;</a></span>paf_filter_escape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * paf_filter_escape </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Escape special characters for strings used in filters.</p>
<p>This function will copy the input string, escaping any characters which have a special meaning in the subscription filter language (see <a class="el" href="paf_8h.html#ad53fc37d6f1e033c09402cbdad77c695">paf_subscribe()</a>).</p>
<p>The input string may contain arbitrary non-NUL characters, and may be of arbitrary length. However, there is a maximum filter size.</p>
<p>Since the same escaping mechanism is used for both service property names and string values, <a class="el" href="paf_8h.html#acde67479418f442ee49307378efbd5c4">paf_filter_escape()</a> may be used for both types.</p>
<p>The string returned is heap-allocated, and it's the caller obligation to use free() to free its memory.</p>
<p>This function for creating filter expressions only. It is not needed and should not be used while creating service property string-type values (see <a class="el" href="paf__value_8h.html" title="Pathfinder Property Value API.">paf_value.h</a>) for use in <a class="el" href="paf_8h.html#a0882224e814007bc8d60aa951e432df6">paf_publish()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>The service property name or string value to be escaped.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a copy of the string, with special characters escaped. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 17 2024 10:55:22 for libpaf by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
